Process the provided CDS sequences in `benchmark/dataset/CompoDynamics/GCF_009428885.1_ASM942888v1_cds_from_genomic.fna`. 

Filter out sequences that meet any of the following criteria: 1) length is not a multiple of 3; 2) does not start with an "ATG" codon; 3) does not end with a standard stop codon ("TAA", "TAG", or "TGA"); 4) contains an internal stop codon. 

Save the remaining valid sequences to `/root/biodatalab/log/biomni_v20260209_pred_results/OpenAI/Azure-GPT-5.2/compodynamics_integration.fna`.

All temp data should be save in `/root/biodatalab/log/biomni_v20260209_tmp/OpenAI/Azure-GPT-5.2/compodynamics_integration`.

<execute>#!/usr/bin/env python3
from pathlib import Path
from Bio import SeqIO
from Bio.Seq import Seq

print("Research log: CDS filtering for CompoDynamics")
print("Input:", "benchmark/dataset/CompoDynamics/GCF_009428885.1_ASM942888v1_cds_from_genomic.fna")

# Plan
plan = [
    "Locate input FASTA and create required output/temp directories",
    "Parse CDS records and apply validity filters (frame, start, stop, internal stops)",
    "Write passing records to output FASTA and save a QC summary to temp directory",
]
status = ["[ ]", "[ ]", "[ ]"]
def show_plan():
    for i,(s,p) in enumerate(zip(status,plan), start=1):
        print(f"{i}. {s} {p}")
print("\nPlan checklist:")
show_plan()

# Step 1
inp = Path("benchmark/dataset/CompoDynamics/GCF_009428885.1_ASM942888v1_cds_from_genomic.fna")
out = Path("/root/biodatalab/log/biomni_v20260209_pred_results/OpenAI/Azure-GPT-5.2/compodynamics_integration.fna")
tmpdir = Path("/root/biodatalab/log/biomni_v20260209_tmp/OpenAI/Azure-GPT-5.2/compodynamics_integration")

tmpdir.mkdir(parents=True, exist_ok=True)
out.parent.mkdir(parents=True, exist_ok=True)

if not inp.exists():
    raise FileNotFoundError(f"Input FASTA not found: {inp.resolve()}")

status[0] = "[✓]"
print("\nUpdated checklist:")
show_plan()

# Step 2: filtering
stop_codons = {"TAA", "TAG", "TGA"}

counts = {
    "total": 0,
    "pass": 0,
    "fail_len_not_multiple_of_3": 0,
    "fail_no_ATG_start": 0,
    "fail_no_stop_end": 0,
    "fail_internal_stop": 0,
    "fail_empty_or_non_ACGT": 0,
}

passed_records = []

def has_only_acgt(s: str) -> bool:
    return set(s) <= set("ACGT")

for rec in SeqIO.parse(str(inp), "fasta"):
    counts["total"] += 1
    seq = str(rec.seq).upper().replace("U", "T")
    seq = seq.replace(" ", "").replace("\n", "").replace("\r", "")
    if len(seq) == 0 or (not has_only_acgt(seq)):
        counts["fail_empty_or_non_ACGT"] += 1
        continue
    if len(seq) % 3 != 0:
        counts["fail_len_not_multiple_of_3"] += 1
        continue
    if not seq.startswith("ATG"):
        counts["fail_no_ATG_start"] += 1
        continue
    if seq[-3:] not in stop_codons:
        counts["fail_no_stop_end"] += 1
        continue
    # internal stop codon: stop in any codon except last
    internal_codons = [seq[i:i+3] for i in range(0, len(seq)-3, 3)]
    if any(c in stop_codons for c in internal_codons):
        counts["fail_internal_stop"] += 1
        continue

    # pass
    rec.seq = Seq(seq)
    passed_records.append(rec)
    counts["pass"] += 1

status[1] = "[✓]"
print("\nUpdated checklist:")
show_plan()

# Step 3: write output + QC
SeqIO.write(passed_records, str(out), "fasta")

qc_path = tmpdir / "filter_qc_summary.tsv"
with qc_path.open("w") as f:
    for k,v in counts.items():
        f.write(f"{k}\t{v}\n")

print("\nResults summary:")
for k in ["total","pass",
          "fail_len_not_multiple_of_3",
          "fail_no_ATG_start",
          "fail_no_stop_end",
          "fail_internal_stop",
          "fail_empty_or_non_ACGT"]:
    print(f"  {k}: {counts[k]}")

print("\nWrote valid CDS FASTA to:", out)
print("Wrote QC summary to:", qc_path)

status[2] = "[✓]"
print("\nUpdated checklist:")
show_plan()
</execute>
<observation>NameError("name 'status' is not defined")</observation>
<execute>#!/usr/bin/env python3
from pathlib import Path
from Bio import SeqIO
from Bio.Seq import Seq

print("Research log: CDS filtering for CompoDynamics")
print("Input:", "benchmark/dataset/CompoDynamics/GCF_009428885.1_ASM942888v1_cds_from_genomic.fna")

# Plan
plan = [
    "Locate input FASTA and create required output/temp directories",
    "Parse CDS records and apply validity filters (frame, start, stop, internal stops)",
    "Write passing records to output FASTA and save a QC summary to temp directory",
]
status = ["[ ]", "[ ]", "[ ]"]

def show_plan():
    for i, (s, p) in enumerate(zip(status, plan), start=1):
        print(f"{i}. {s} {p}")

print("\nPlan checklist:")
show_plan()

# Step 1
inp = Path("benchmark/dataset/CompoDynamics/GCF_009428885.1_ASM942888v1_cds_from_genomic.fna")
out = Path("/root/biodatalab/log/biomni_v20260209_pred_results/OpenAI/Azure-GPT-5.2/compodynamics_integration.fna")
tmpdir = Path("/root/biodatalab/log/biomni_v20260209_tmp/OpenAI/Azure-GPT-5.2/compodynamics_integration")

tmpdir.mkdir(parents=True, exist_ok=True)
out.parent.mkdir(parents=True, exist_ok=True)

if not inp.exists():
    raise FileNotFoundError(f"Input FASTA not found: {inp.resolve()}")

status[0] = "[✓]"
print("\nUpdated checklist:")
show_plan()

# Step 2
stop_codons = {"TAA", "TAG", "TGA"}

counts = {
    "total": 0,
    "pass": 0,
    "fail_len_not_multiple_of_3": 0,
    "fail_no_ATG_start": 0,
    "fail_no_stop_end": 0,
    "fail_internal_stop": 0,
    "fail_empty_or_non_ACGT": 0,
}

passed_records = []

def has_only_acgt(s: str) -> bool:
    return set(s) <= set("ACGT")

for rec in SeqIO.parse(str(inp), "fasta"):
    counts["total"] += 1
    seq = str(rec.seq).upper().replace("U", "T")
    seq = seq.replace(" ", "").replace("\n", "").replace("\r", "")

    if len(seq) == 0 or (not has_only_acgt(seq)):
        counts["fail_empty_or_non_ACGT"] += 1
        continue
    if len(seq) % 3 != 0:
        counts["fail_len_not_multiple_of_3"] += 1
        continue
    if not seq.startswith("ATG"):
        counts["fail_no_ATG_start"] += 1
        continue
    if seq[-3:] not in stop_codons:
        counts["fail_no_stop_end"] += 1
        continue
    internal_codons = [seq[i:i+3] for i in range(0, len(seq)-3, 3)]
    if any(c in stop_codons for c in internal_codons):
        counts["fail_internal_stop"] += 1
        continue

    rec.seq = Seq(seq)
    passed_records.append(rec)
    counts["pass"] += 1

status[1] = "[✓]"
print("\nUpdated checklist:")
show_plan()

# Step 3
SeqIO.write(passed_records, str(out), "fasta")

qc_path = tmpdir / "filter_qc_summary.tsv"
with qc_path.open("w") as f:
    for k, v in counts.items():
        f.write(f"{k}\t{v}\n")

print("\nResults summary:")
for k in [
    "total",
    "pass",
    "fail_len_not_multiple_of_3",
    "fail_no_ATG_start",
    "fail_no_stop_end",
    "fail_internal_stop",
    "fail_empty_or_non_ACGT",
]:
    print(f"  {k}: {counts[k]}")

print("\nWrote valid CDS FASTA to:", out)
print("Wrote QC summary to:", qc_path)

status[2] = "[✓]"
print("\nUpdated checklist:")
show_plan()
</execute>
<observation>NameError("name 'status' is not defined")</observation>
<execute>#!/usr/bin/env python3
from pathlib import Path
from Bio import SeqIO
from Bio.Seq import Seq

print("Research log: CDS filtering for CompoDynamics")
print("Input:", "benchmark/dataset/CompoDynamics/GCF_009428885.1_ASM942888v1_cds_from_genomic.fna")

# ---- Plan (kept self-contained; no cross-cell state) ----
plan = [
    "Locate input FASTA and create required output/temp directories",
    "Parse CDS records and apply validity filters (frame, start, stop, internal stops)",
    "Write passing records to output FASTA and save a QC summary to temp directory",
]
status = ["[ ]", "[ ]", "[ ]"]

def show_plan(local_status):
    for i, (s, p) in enumerate(zip(local_status, plan), start=1):
        print(f"{i}. {s} {p}")

print("\nPlan checklist:")
show_plan(status)

# ---- Step 1 ----
inp = Path("benchmark/dataset/CompoDynamics/GCF_009428885.1_ASM942888v1_cds_from_genomic.fna")
out = Path("/root/biodatalab/log/biomni_v20260209_pred_results/OpenAI/Azure-GPT-5.2/compodynamics_integration.fna")
tmpdir = Path("/root/biodatalab/log/biomni_v20260209_tmp/OpenAI/Azure-GPT-5.2/compodynamics_integration")

tmpdir.mkdir(parents=True, exist_ok=True)
out.parent.mkdir(parents=True, exist_ok=True)

if not inp.exists():
    raise FileNotFoundError(f"Input FASTA not found: {inp.resolve()}")

status[0] = "[✓]"
print("\nUpdated checklist:")
show_plan(status)

# ---- Step 2 ----
stop_codons = {"TAA", "TAG", "TGA"}

counts = {
    "total": 0,
    "pass": 0,
    "fail_len_not_multiple_of_3": 0,
    "fail_no_ATG_start": 0,
    "fail_no_stop_end": 0,
    "fail_internal_stop": 0,
    "fail_empty_or_non_ACGT": 0,
}

def has_only_acgt(s: str) -> bool:
    return set(s) <= set("ACGT")

passed_records = []
for rec in SeqIO.parse(str(inp), "fasta"):
    counts["total"] += 1
    seq = str(rec.seq).upper().replace("U", "T")
    seq = seq.replace(" ", "").replace("\n", "").replace("\r", "")

    if (not seq) or (not has_only_acgt(seq)):
        counts["fail_empty_or_non_ACGT"] += 1
        continue
    if len(seq) % 3 != 0:
        counts["fail_len_not_multiple_of_3"] += 1
        continue
    if not seq.startswith("ATG"):
        counts["fail_no_ATG_start"] += 1
        continue
    if seq[-3:] not in stop_codons:
        counts["fail_no_stop_end"] += 1
        continue
    # internal stop codon = any stop codon before last codon
    for i in range(0, len(seq) - 3, 3):
        if seq[i:i+3] in stop_codons:
            counts["fail_internal_stop"] += 1
            break
    else:
        rec.seq = Seq(seq)
        passed_records.append(rec)
        counts["pass"] += 1

status[1] = "[✓]"
print("\nUpdated checklist:")
show_plan(status)

# ---- Step 3 ----
SeqIO.write(passed_records, str(out), "fasta")

qc_path = tmpdir / "filter_qc_summary.tsv"
with qc_path.open("w") as f:
    for k in [
        "total",
        "pass",
        "fail_len_not_multiple_of_3",
        "fail_no_ATG_start",
        "fail_no_stop_end",
        "fail_internal_stop",
        "fail_empty_or_non_ACGT",
    ]:
        f.write(f"{k}\t{counts[k]}\n")

print("\nResults summary:")
for k in [
    "total",
    "pass",
    "fail_len_not_multiple_of_3",
    "fail_no_ATG_start",
    "fail_no_stop_end",
    "fail_internal_stop",
    "fail_empty_or_non_ACGT",
]:
    print(f"  {k}: {counts[k]}")

print("\nWrote valid CDS FASTA to:", out)
print("Wrote QC summary to:", qc_path)

status[2] = "[✓]"
print("\nUpdated checklist:")
show_plan(status)
</execute>
<observation>NameError("name 'plan' is not defined")</observation>
<execute>#!/usr/bin/env python3
from pathlib import Path
from Bio import SeqIO
from Bio.Seq import Seq

print("Research log: CDS filtering for CompoDynamics")
print("Input:", "benchmark/dataset/CompoDynamics/GCF_009428885.1_ASM942888v1_cds_from_genomic.fna")

# NOTE: To avoid any hidden state issues in this environment, we will not
# rely on plan/status variables at runtime. We print a fixed checklist text.

print("\nPlan checklist:")
print("1. [ ] Locate input FASTA and create required output/temp directories")
print("2. [ ] Parse CDS records and apply validity filters (frame, start, stop, internal stops)")
print("3. [ ] Write passing records to output FASTA and save a QC summary to temp directory")

# Step 1
inp = Path("benchmark/dataset/CompoDynamics/GCF_009428885.1_ASM942888v1_cds_from_genomic.fna")
out = Path("/root/biodatalab/log/biomni_v20260209_pred_results/OpenAI/Azure-GPT-5.2/compodynamics_integration.fna")
tmpdir = Path("/root/biodatalab/log/biomni_v20260209_tmp/OpenAI/Azure-GPT-5.2/compodynamics_integration")

tmpdir.mkdir(parents=True, exist_ok=True)
out.parent.mkdir(parents=True, exist_ok=True)

if not inp.exists():
    raise FileNotFoundError(f"Input FASTA not found: {inp.resolve()}")

print("\nUpdated checklist:")
print("1. [✓] Locate input FASTA and create required output/temp directories (completed)")
print("2. [ ] Parse CDS records and apply validity filters (frame, start, stop, internal stops)")
print("3. [ ] Write passing records to output FASTA and save a QC summary to temp directory")

# Step 2
stop_codons = {"TAA", "TAG", "TGA"}

counts = {
    "total": 0,
    "pass": 0,
    "fail_len_not_multiple_of_3": 0,
    "fail_no_ATG_start": 0,
    "fail_no_stop_end": 0,
    "fail_internal_stop": 0,
    "fail_empty_or_non_ACGT": 0,
}

def has_only_acgt(s: str) -> bool:
    return set(s) <= set("ACGT")

passed_records = []
for rec in SeqIO.parse(str(inp), "fasta"):
    counts["total"] += 1
    seq = str(rec.seq).upper().replace("U", "T").replace(" ", "").replace("\n", "").replace("\r", "")

    if (not seq) or (not has_only_acgt(seq)):
        counts["fail_empty_or_non_ACGT"] += 1
        continue
    if len(seq) % 3 != 0:
        counts["fail_len_not_multiple_of_3"] += 1
        continue
    if not seq.startswith("ATG"):
        counts["fail_no_ATG_start"] += 1
        continue
    if seq[-3:] not in stop_codons:
        counts["fail_no_stop_end"] += 1
        continue
    # Internal stop codon: any stop codon before final codon
    internal_stop = False
    for i in range(0, len(seq) - 3, 3):
        if seq[i:i+3] in stop_codons:
            internal_stop = True
            break
    if internal_stop:
        counts["fail_internal_stop"] += 1
        continue

    rec.seq = Seq(seq)
    passed_records.append(rec)
    counts["pass"] += 1

print("\nUpdated checklist:")
print("1. [✓] Locate input FASTA and create required output/temp directories (completed)")
print("2. [✓] Parse CDS records and apply validity filters (completed)")
print("3. [ ] Write passing records to output FASTA and save a QC summary to temp directory")

# Step 3
SeqIO.write(passed_records, str(out), "fasta")

qc_path = tmpdir / "filter_qc_summary.tsv"
with qc_path.open("w") as f:
    for k in [
        "total",
        "pass",
        "fail_len_not_multiple_of_3",
        "fail_no_ATG_start",
        "fail_no_stop_end",
        "fail_internal_stop",
        "fail_empty_or_non_ACGT",
    ]:
        f.write(f"{k}\t{counts[k]}\n")

print("\nResults summary:")
for k in [
    "total",
    "pass",
    "fail_len_not_multiple_of_3",
    "fail_no_ATG_start",
    "fail_no_stop_end",
    "fail_internal_stop",
    "fail_empty_or_non_ACGT",
]:
    print(f"  {k}: {counts[k]}")

print("\nWrote valid CDS FASTA to:", out)
print("Wrote QC summary to:", qc_path)

print("\nUpdated checklist:")
print("1. [✓] Locate input FASTA and create required output/temp directories (completed)")
print("2. [✓] Parse CDS records and apply validity filters (completed)")
print("3. [✓] Write passing records to output FASTA and save a QC summary to temp directory (completed)")
</execute>
<observation>Research log: CDS filtering for CompoDynamics
Input: benchmark/dataset/CompoDynamics/GCF_009428885.1_ASM942888v1_cds_from_genomic.fna

Plan checklist:
1. [ ] Locate input FASTA and create required output/temp directories
2. [ ] Parse CDS records and apply validity filters (frame, start, stop, internal stops)
3. [ ] Write passing records to output FASTA and save a QC summary to temp directory

Updated checklist:
1. [✓] Locate input FASTA and create required output/temp directories (completed)
2. [ ] Parse CDS records and apply validity filters (frame, start, stop, internal stops)
3. [ ] Write passing records to output FASTA and save a QC summary to temp directory

Updated checklist:
1. [✓] Locate input FASTA and create required output/temp directories (completed)
2. [✓] Parse CDS records and apply validity filters (completed)
3. [ ] Write passing records to output FASTA and save a QC summary to temp directory

Results summary:
  total: 2701
  pass: 1984
  fail_len_not_multiple_of_3: 54
  fail_no_ATG_start: 642
  fail_no_stop_end: 14
  fail_internal_stop: 7
  fail_empty_or_non_ACGT: 0

Wrote valid CDS FASTA to: /root/biodatalab/log/biomni_v20260209_pred_results/OpenAI/Azure-GPT-5.2/compodynamics_integration.fna
Wrote QC summary to: /root/biodatalab/log/biomni_v20260209_tmp/OpenAI/Azure-GPT-5.2/compodynamics_integration/filter_qc_summary.tsv

Updated checklist:
1. [✓] Locate input FASTA and create required output/temp directories (completed)
2. [✓] Parse CDS records and apply validity filters (completed)
3. [✓] Write passing records to output FASTA and save a QC summary to temp directory (completed)
</observation>
<solution>
1. [✓] Locate input FASTA and create required output/temp directories (completed)
2. [✓] Parse CDS records and apply validity filters (completed)
3. [✓] Write passing records to output FASTA and save a QC summary to temp directory (completed)

Output written:
- Valid CDS FASTA: /root/biodatalab/log/biomni_v20260209_pred_results/OpenAI/Azure-GPT-5.2/compodynamics_integration.fna
- Temp/QC summary: /root/biodatalab/log/biomni_v20260209_tmp/OpenAI/Azure-GPT-5.2/compodynamics_integration/filter_qc_summary.tsv

Filtering results:
- total: 2701
- pass: 1984
- fail_len_not_multiple_of_3: 54
- fail_no_ATG_start: 642
- fail_no_stop_end: 14
- fail_internal_stop: 7
- fail_empty_or_non_ACGT: 0
</solution>